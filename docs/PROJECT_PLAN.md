### 마비노기 모바일 제작법 계산기 프로젝트 계획서

#### 1. 프로젝트 목표

현재의 개인 인벤토리 기반 아이템 관리 시스템을, 제공된 참조 사이트와 같이 모든 사용자가 마비노기 모바일 아이템의 제작법과 재료를 검색하고 계산할 수 있는 공개적인 제작 계산기 웹사이트로 전환하는 것을 목표로 합니다.

#### 2. 주요 기능 정의

1.  **아이템 검색 기능**:
    *   사용자가 원하는 아이템의 이름을 입력하여 검색할 수 있습니다.
    *   검색 결과는 목록 형태로 제공됩니다.

2.  **아이템 상세 정보 및 제작 트리 조회**:
    *   사용자가 특정 아이템을 선택하면, 해당 아이템의 상세 정보(아이콘, 설명 등)를 표시합니다.
    *   해당 아이템이 제작 아이템일 경우, 필요한 재료와 수량을 트리 구조로 시각화하여 보여줍니다. (예: 궁극의 정령석 -> 최고급 루비 2개, 최고급 사파이어 2개, ...)
    *   트리의 각 재료는 재귀적으로 하위 재료를 계속해서 보여줍니다.

3.  **최종 재료 총합 계산**:
    *   제작 트리에 있는 모든 아이템을 기반으로, 더 이상 분해되지 않는 기본 재료(예: 채집물, 몬스터 드랍템)들의 총 필요 개수를 계산하여 표로 요약 제공합니다.

4.  **반응형 UI/UX**:
    *   데스크톱과 모바일 환경 모두에서 편리하게 사용할 수 있도록 반응형 웹 디자인을 적용합니다.

#### 3. 기술 스택 (기존 프로젝트 활용)

*   **프론트엔드**: Next.js, React, Tailwind CSS
*   **백엔드**: Node.js, Express.js
*   **데이터베이스**: MySQL

#### 4. 데이터베이스 스키마 확장 계획

현재 스키마(`items`, `crafting_recipes` 등)는 좋은 기반이지만, 공개적인 정보 제공을 위해 다음과 같은 확장이 필요합니다.

*   `items` 테이블:
    *   `source_type` (획득처 종류, ENUM: 'CRAFT', 'GATHER', 'MONSTER', 'SHOP' 등) 컬럼 추가.
    *   `source_info` (획득처 상세 정보, TEXT: '실리엔 2-1', '대장장이 판매' 등) 컬럼 추가.
*   (선택) `monsters`, `gathering_nodes` 등 상세 정보 테이블 추가:
    *   아이템의 획득처 정보를 더 구조화하여 관리할 수 있습니다.

**핵심 과제**: 이 기능을 구현하기 위해서는 마비노기 모바일의 **거의 모든 아이템과 제작법에 대한 데이터**가 필요합니다. 이 데이터는 웹 크롤링, 커뮤니티 자료 수집, 또는 직접 입력을 통해 데이터베이스에 미리 채워져 있어야 합니다.

#### 5. 백엔드 API 개발 계획

기존 API를 수정하고 새로운 API를 추가하여 프론트엔드에 필요한 데이터를 제공합니다. API 경로는 `/api` 접두사를 사용하여 명확하게 관리합니다.

*   **`GET /api/items/search?q=<keyword>`**:
    *   아이템 이름으로 검색하여 일치하는 아이템 목록을 반환합니다.
*   **`GET /api/items/:item_id`**:
    *   특정 아이템의 상세 정보를 반환합니다. (획득처 정보 포함)
*   **`GET /api/items/:item_id/crafting-tree`**:
    *   해당 아이템의 전체 제작 트리를 재귀적으로 구성하여 중첩된 JSON 형태로 반환합니다.
    *   최종 기본 재료의 총합을 계산하여 함께 반환합니다.

#### 6. 프론트엔드 개발 계획

1.  **메인 페이지 (`/`)**:
    *   웹사이트의 제목과 아이템 검색창을 중앙에 배치합니다.
2.  **검색 결과 페이지 (`/search?q=...`)**:
    *   검색된 아이템 목록을 표시합니다.
3.  **아이템 상세 페이지 (`/items/:item_id`)**:
    *   **재귀적 렌더링 컴포넌트**: 전달받은 제작 트리(JSON)를 재귀적으로 렌더링하여 트리 구조를 화면에 표시하는 React 컴포넌트를 개발합니다.
    *   **재료 요약 테이블**: 제작 트리 API에서 함께 전달된 최종 재료 총합 데이터를 표 형태로 표시합니다.
    *   전체적인 레이아웃을 참조 사이트와 유사하게 구성합니다.

#### 7. 개발 단계 (Roadmap)

1.  **1단계: 데이터베이스 구축**
    *   `schema.sql`을 수정하여 테이블 구조를 확장합니다.
    *   (가장 중요) 마비노기 모바일 아이템 및 제작법 데이터를 수집하여 DB에 채워 넣습니다. (초기 샘플 데이터로 10~20개 아이템의 완전한 트리 구조 준비)

2.  **2단계: 백엔드 API 개발**
    *   위에 계획된 3개의 신규 API(`search`, `item_detail`, `crafting-tree`)를 개발하고 테스트합니다.

3.  **3단계: 프론트엔드 핵심 기능 개발**
    *   아이템 검색창 및 검색 결과 표시 기능을 구현합니다.
    *   재귀적 트리 렌더링 컴포넌트를 개발합니다.
    *   `items/:item_id` 페이지에서 백엔드 API를 호출하여 받아온 데이터로 트리와 요약 테이블을 렌더링합니다.

4.  **4단계: UI/UX 개선 및 배포**
    *   Tailwind CSS를 사용하여 전체적인 디자인을 다듬습니다.
    *   최종 테스트 후 배포를 준비합니다. 